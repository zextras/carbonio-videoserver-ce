#!/bin/sh

set -e

# creating janus group if it isn't already there
if ! getent group janus >/dev/null; then
        addgroup --system --force-badname --quiet janus
fi

# creating janus user if it isn't already there
if ! getent passwd janus >/dev/null; then
        adduser --system --force-badname --quiet \
            --ingroup janus \
            --home /var/lib/janus \
            --shell /bin/false \
            janus
        usermod -c "Janus WebRTC group" janus
fi

if ! test -d /var/lib/janus; then
	mkdir /var/lib/janus
	chown -R janus:janus /var/lib/janus
	# This directory can contain sensitive data and should not be world-readable
	chmod 0700 /var/lib/janus
fi
#DEBHELPER#
